FROM python:3.10-slim

WORKDIR /app

# Copy the proxy script
COPY api_proxy.py /app/

# Install required dependencies
RUN pip install --no-cache-dir requests

# Expose the proxy port
EXPOSE 5001

# Set environment variables
ENV TARGET_API="http://ai-container-manager:5000"
ENV PROXY_PORT=5001

# Run the proxy
CMD ["python", "api_proxy.py", "--target", "http://ai-container-manager:5000"]